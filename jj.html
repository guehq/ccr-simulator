<!DOCTYPE html>
<html lang='en' class='has-navbar-fixed-top'>
<head>
  <meta charset='UTF-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <title>JJ CCR Simulator</title>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css' integrity='sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==' crossorigin='anonymous' referrerpolicy='no-referrer' />
  <link rel='stylesheet' href='./styles/bulma.min.css'>
  <link rel='stylesheet' href='./styles/style.css'>
</head>
<body>
  <nav class='navbar is-fixed-top is-black'>
    <div class='navbar-brand'>
      <a class='navbar-item' href='index.html'>
        <img src='./images/jj-logo.jpeg' alt='JJ'>
      </a>
    </div>

    <div class='navbar-menu'>
      <div class='navbar-start'>
        <div class='navbar-item'>
          <div class='buttons are-small'>
            <button id='descend' class='button is-info is-rounded' onclick='descend ()' title='Descend 5 meters'>Descend</button>
            <button id='ascend' class='button is-info is-rounded' onclick='ascend ()' title='Ascend 5 meters'>Ascend</button>
            <button id='auto_ascend' class='button is-info is-rounded' onclick='autoAscend ()' title='Ascend 1m/sec speed'>Auto Ascend</button>
          </div>
        </div>
        <div class='navbar-item'>
          <div class='buttons are-small'>
            <button id='diluentFlush' class='button is-warning is-rounded' onclick='diluentFlush ()'>Diluent Flush</button>
            <button id='oxygenFlush' class='button is-warning is-rounded' onclick='oxygenFlush ()'>Oxygen Flush</button>
          </div>
        </div>
        <div class='navbar-item'>
          <div class='buttons are-small'>
            <button id='mavDiluent' class='button is-success is-rounded' onclick='mavDiluent ()'>MAV Diluent</button>
            <button id='mavOxygen' class='button is-success is-rounded' onclick='mavOxygen ()'>MAV Oxygen</button>
          </div>
        </div>
        <div class='navbar-item'>
          <div class='buttons are-small'>
            <button id='hideNerd' class='button is-dark is-rounded' onclick='hideNerd ()'><i class='fa-solid fa-eye-slash'></i>&nbsp;Hide Nerd</button>
            <button id='showNerd' class='button is-dark is-rounded is-hidden' onclick='showNerd ()'><i class='fa-solid fa-eye'></i>&nbsp;Show Nerd</button>
            <button id='reset_data' class='button is-danger has-background-black-ter is-rounded' onclick='resetData ()'>Reset Data</button>
          </div>
        </div>
      </div>

      <div class='navbar-end'>
        <div class='navbar-item'>
          <p class='is-size-7'>setpoint:</p>
          <section id='setpoint'>
            <label class='sp.19'>
              <input type='radio' value='0.18' name='radio' checked>
              <span>0.19</span>
            </label>
            <label class='sp.7'>
              <input type='radio' value='0.68' name='radio'>
              <span>0.7</span>
            </label>
            <label class='sp1.2'>
              <input type='radio' value='1.18' name='radio'>
              <span>1.2</span>
            </label>
          </section>
        </div>
      </div>
    </div>
  </nav>

  <section class='main'>
    <div class='columns'>
      <div id='failures' class='column is-one-fifth has-background-dark p-0'>
        <aside class='menu'>
          <p class='menu-label p-5 mb-0 has-text-white' style='line-height: 2.5em'>
            Potential Failures 
            <button class='button is-small is-ghost is-black' title='Show Hints' onclick='toggleHint ()'><i id='failuresHintButton' class='fa-solid fa-lightbulb has-text-success'></i></button>
            <button class='button is-small is-ghost is-black' title='Show Solution' onclick='toggleSolution ()'><i id="failuresSolutionButton" class='fa-solid fa-book'></i></button>
          </p>
          <ul class='menu-list'>
            <li title='O2 sensor discrepancy'>
              <a class='has-text-white' onclick='runFC1 ()'>
                <i id='fc1icon' class='fa-regular fa-circle-exclamation has-text-success'></i>&nbsp;FC1 <span id='FC1hint'>- O2 Sensor</span>
              </a>
            </li>

            <li title='Moderately hight but safe PO2'>
              <a class='has-text-white' onclick='runFC2 ()'>
                <i class='fa-regular fa-circle-exclamation has-text-success'></i>&nbsp;FC2 <span id='FC2hint'>- Hight PO2 safe</span>
              </a>
            </li>

            <li title='Hight unsafe PO2 - Hyperoxic warning'>
              <a class='has-text-white' onclick='runFC3 ()'>
                <i class='fa-regular fa-circle-exclamation has-text-success'></i>&nbsp;FC3 <span id='FC3hint'>- High PO2 unsafe</span>
              </a>
            </li>

            <li title='Low unsafe PO2 - Hypoxic warning'>
              <a class='has-text-white' onclick='runFC4 ()'>
                <i class='fa-regular fa-circle-exclamation has-text-success'></i>&nbsp;FC4 <span id='FC4hint'>- Low PO2</span>
              </a>
            </li>

            <li title='Sensor current limitation and voting logic failure'>
              <a class='has-text-white' onclick='runFC5 ()'>
                <i id='fc5icon' class='fa-regular fa-circle-exclamation has-text-success'></i>&nbsp;FC5 <span id='FC5hint'>- Sensor Limit.</span>
              </a>
            </li>

            <li title='Controller failure'>
              <a class='has-text-white' onclick='runFC6 ()'>
                <i id='fc6icon' class='fa-regular fa-circle-exclamation has-text-success'></i>&nbsp;FC6 <span id='FC6hint'>- Controller Fail</span>
              </a>
            </li>

            <li title='Solenoid alert, interrupted O2 supply'>
              <a class='has-text-white' onclick='runFC7 ()'>
                <i id='fc7icon' class='fa-regular fa-circle-exclamation has-text-success'></i>&nbsp;FC7 <span id='FC7hint'>- Solenoid Alert</span>
              </a>
            </li>

            <li title='O2 runaway - Malfunctioning addition'>
              <a class='has-text-white' onclick='runFC8 ()'>
                <i id='fc8icon' class='fa-regular fa-circle-exclamation has-text-success'></i>&nbsp;FC8 <span id='FC8hint'>- O2 Runaway</span>
              </a>
            </li>

            <li title='Diluent runaway - Malfunctioning ADV'>
              <a class='has-text-white' onclick='runFC9 ()'>
                <i id='fc9icon' class='fa-regular fa-circle-exclamation has-text-success'></i>&nbsp;FC9 <span id='FC9hint'>- Dil. Runaway</span>
              </a>
            </li>
            
            <li title='Voting failed - Voting logic failure'>
              <a class='has-text-white' onclick='runFC10 ()'>
                <i id='fc10icon' class='fa-regular fa-circle-exclamation has-text-success'></i>&nbsp;FC10 <span id='FC10hint'>- Voting Failed</span>
              </a>
            </li>
            
            <li title='Hypercapnia - CO2 absorbent failure'>
              <a class='has-text-white' onclick='runFC11 ()'>
                <i id='fc11icon' class='fa-regular fa-circle-exclamation has-text-success'></i>&nbsp;FC11 <span id='FC11hint'>- Hypercapnia</span>
              </a>
            </li>
            
            <li title='Released counterlung OPV'>
              <a class='has-text-white' onclick='runFC12 ()'>
                <i id='fc12icon' class='fa-regular fa-circle-exclamation has-text-success'></i>&nbsp;FC12 <span id='FC12hint'>- CL OPV</span>
              </a>
            </li>
            
            <li title='Semi-closed operation'>
              <a class='has-text-white'  onclick='runFC13 ()'>
                <i id='fc13icon' class='fa-regular fa-circle-exclamation has-text-success'></i>&nbsp;FC13 <span id='FC13hint'>- SCR Operation</span>
              </a>
            </li>
            
            <li title='Caustic Cocktail'>
              <a class='has-text-white'  onclick='runFC14 ()'>
                <i id='fc14icon' class='fa-regular fa-circle-exclamation has-text-success'></i>&nbsp;FC14 <span id='FC14hint'>- Caustic C.</span>
              </a>
            </li>
          </ul>
          <button class='button is-small is-fullwidth is-black mt-4' onclick='randomFailure ()'><i class='fa-solid fa-play'></i>&nbsp;Play random failures</button>
        </aside>

        <!-- <hr>

        <aside class='menu'>
          <p class='menu-label p-4 has-text-white'>Upcoming Features</p>
          <ul class='menu-list px-4'>
            <li class='has-text-white m-2'><i class='fa-solid fa-lightbulb'></i>&nbsp; HUD</li>
          </ul>
        </aside> -->
      </div>
      
      <div id='app' class='column is-four-fifth has-background-info'>
        <div class='columns'>
          <div class='column is-7'>
            <section class='section'>
              <section class='status notification is-primary has-text-black'>
                <label>STATUS:</label>
                <div id='solenoid_valve'></div>
                <div id='adv_valve'></div>
              </section>

              <section class='notifications mt-5'>
                <div id='gas_density' class='notification is-warning is-hidden'>
                  High <strong>Gas Density</strong> Risk!
                </div>

                <div id='gas_narcosis' class='notification is-warning is-hidden'>
                  High <strong>Gas Narcosis</strong> Risk!
                </div>

                <div id='symptoms' class='notification is-warning is-hidden'>
                  <label>SYMPTOMS:</label>
                  <ul id='fc11symptoms' class='is-hidden' style='list-style-type: circle; margin-left: 1.5em'>
                    <li>Increased breathing rate</li>
                    <li>Gasping</li>
                    <li>Headache</li>
                    <li>Anxiety</li>
                  </ul>

                  <ul id='fc14symptoms' class='is-hidden' style='list-style-type: circle; margin-left: 1.5em'>
                    <li>Gurgling sound</li>
                    <li>Loss of bouyancy</li>
                    <li>Breathing resistance</li>
                    <li>Bitter taste</li>
                    <li>Coughing and gagging</li>
                  </ul>
                </div>

                <div id='solutions' class='notification is-success is-hidden'>
                  <ol id='fc1solution' class='is-hidden' style='list-style-type: numbers; margin-left: 1.5em'>
                    <p class="mb-3"><strong>FC1 SOLUTION:</strong></p>
                    <li>Signal team and stabilize</li>
                    <li>Switch CTRL to low setpoint 0.7</li>
                    <li>Check CTRL diluent pO2</li>
                    <li>One handed diluent flush</li>
                    <li>Evaluate circumtances</li>
                  </ol>
                </div>
              </section>
    
              <section id='messages' class='passive'>
                <p class='title has-text-white'>You Are Dead!</p>
                <p class='subtitle has-text-white'>'<span id='reason'></span>'</p>
              </section>
            </section>
          </div>

          <div class='column is-5'>
            <section id='hud' class='has-background-black m-5'>
              <div class='columns'>
                <div id='hud_sensor1' class='column'>
                  <div class='hud-light light-red has-background-grey-darker is-blinkingXXX'></div>
                  <div class='hud-light light-green has-background-grey-darker'></div>
                  <div class='hud-light light-yellow has-background-grey-darker'></div>
                  <div class='hud-light light-red has-background-danger'></div>
                </div>
                <div id='hud_sensor2' class='column'>
                  <div class='hud-light light-top has-background-danger'></div>
                  <div class='hud-light light-green has-background-success'></div>
                  <div class='hud-light light-yellow has-background-warning'></div>
                  <div class='hud-light light-bottom has-background-danger'></div>
                </div>
                <div id='hud_sensor3' class='column'>
                  <div class='hud-light light-top has-background-grey-darker'></div>
                  <div class='hud-light light-green has-background-grey-darker'></div>
                  <div class='hud-light light-yellow has-background-grey-darker'></div>
                  <div class='hud-light light-bottom has-background-danger'></div>
                </div>
              </div>
            </section>

            <section id='nerd' class='nerd visible'>
              <table id='nerd-top'>
                <thead>
                  <tr>
                    <th>DEPTH</th>
                    <th>TIME</th>
                    <th>STOP</th>
                    <th>TIME</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span id='depth'></span></td>
                    <td>
                      <label id='minutes'>00</label><span style='font-size: .5em'>:</span><label id='seconds' style='font-size: .5em'>00</label></td>
                    <td>-</td>
                    <td>-</td>
                  </tr>
                </tbody>
              </table>

              <table id='nerd-center'>
                <tr>
                  <td><span id='sensor1'></span></td>
                  <td><span id='sensor2'></span></td>
                  <td><span id='sensor3'></span></td>
                </tr>
              </table>

              <div id='nerd-warning-FC10' class='nerd-warning is-hidden' style='padding: 4px 0'>
                <p class='is-size-3 has-text-warning has-text-centered'>VOTING FAILED</p>
              </div>

              <table id='nerd-bottom'>
                <thead>
                  <tr>
                    <th></th>
                    <th>O2/HE</th>
                    <th>NDL</th>
                    <th>TTS</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>CC</td>
                    <td><input id='fO2' type='number' value='21' onfocusout='resetData ()'>/<input id='fHe' type='number' value='35' onfocusout='resetData ()'></td>
                    <td>-</td>
                    <td><span id='tts'></span></td>
                  </tr>
                </tbody>
              </table>

              <section class='nerd-buttons'>
                <button class='btn btn-left'></button>
                <button class='btn btn-right'></button>
              </section>
            </section>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class='footer has-text-white has-background-black'>
    <div class='content has-text-centered'>
      <p>Copyright &copy; nev[at]gue.com</p>
    </div>
  </footer>

  <script src='./js/script.js'></script>
  <script src='./js/gue-gas-dynamics.js'></script>
  <script src='./js/gue-jj-FC.js'></script>
</body>
</html>
